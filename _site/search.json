[
  {
    "objectID": "results/relatorio.html",
    "href": "results/relatorio.html",
    "title": "Análise Estatística de Fatores de Risco para Doença Coronária",
    "section": "",
    "text": "O dataset provém de um estudo que analisou 297 pacientes na Cleveland Clinic para avaliação da Doença Coronária;\nO experimento envolveu 3 estágios:\n\nTeste de esforço (protocolo de Bruce)\nCinefluoroscopia\nAngiografia coronária\nCintilografia com Tálio-201\n\n\n\n\nage\nsex\ncp : tipo de dor no peito\n\nAngina Típica: Atende a três critérios (localização atrás do osso do peito, provocada por esforço/estresse e aliviada por repouso).\nAngina Atípica: Atende a apenas dois desses critérios.\nDor Não Anginosa: Atende a apenas um ou nenhum dos critérios, sugerindo que a causa pode ser muscular ou gástrica (não cardíaca).\nAssintomático: O paciente não sente dor, mas o médico ainda assim solicitou os exames devido a outros fatores de risco (como idade ou histórico familiar).\n\nthalach : Frequência cardíaca máxima atingida antes da exaustão ou sintomas (no teste de esforço).\nexang : Indica se o paciente sentiu angina (dor) durante o exercício.\noldpeak : diferença entre a posição do segmento ST (ECG) no repouso e no pico do esforço (thalac) (quanto maior essa diferença, maior é a área do coração que sofre por falta de sangue)\nslope : Enquanto o oldpeak diz o quanto a linha afundou, o slope diz como ela se comporta logo após o afundamento. Existem três tipos principais de inclinação:\n\nValue 0: Upsloping (Ascendente): A linha afunda, mas sobe rápido. É comum em exercícios intensos e nem sempre indica doença grave.\nValue 1: Flat (Plano): A linha afunda e fica “reta”. É um sinal clássico e preocupante de isquemia.\nValue 2: Downsloping (Descendente): A linha afunda e continua descendo. É o sinal mais grave de todos, indicando que o coração está em alto sofrimento isquêmico. (mesmo após a interrupção do esforço)\n\nca : Número de vasos principais com depósitos de cálcio ou interrupções no fluxo.\n\n0: Nenhuma calcificação significativa (indício de artérias limpas)\n1, 2 o u 3: Indica que a doença está presente em um, dois ou três vasos principais.\n\nthal : Avalia se o sangue está chegando a todas as partes do coração durante o repouso e após o esforço.\n\n0 = Normal: O contraste se distribui uniformemente por todo o coração.\n1 = Fixed Defect (Defeito Fixo): Uma parte do coração não recebe o contraste nem no esforço, nem no repouso. Isso geralmente indica tecido morto (cicatriz de um infarto antigo).\n2 = Reversable Defect (Defeito Reversível): O coração parece normal em repouso, mas “falta sangue” em alguma região durante o esforço. Isso é o sinal clássico de isquemia ativa: a artéria está entupida, mas o tecido ainda está vivo e sofrendo.\n\ncondition (target)\ntrestbps : É a pressão arterial medida no momento da internação.\nfbs : Glicemia de Jejum é maior ou menor que 120mg/dl (binário)\nchol : nível total de colesterol no sangue.\nrestecg :\n\nValue 0 (Normal): O coração em repouso não apresenta irregularidades elétricas.\nValue 1 (Anormalidade de Onda ST-T): O coração já mostra sinais de sofrimento mesmo sem fazer esforço. É um sinal de alerta precoce.\nValue 2 (Hipertrofia Ventricular Esquerda): Indica que o músculo do coração está “inchado” (grosso), geralmente por ter que fazer muita força para bombear o sangue contra uma pressão alta crônica."
  },
  {
    "objectID": "results/relatorio.html#variáveis-analisadas",
    "href": "results/relatorio.html#variáveis-analisadas",
    "title": "Análise Estatística de Fatores de Risco para Doença Coronária",
    "section": "",
    "text": "age\nsex\ncp : tipo de dor no peito\n\nAngina Típica: Atende a três critérios (localização atrás do osso do peito, provocada por esforço/estresse e aliviada por repouso).\nAngina Atípica: Atende a apenas dois desses critérios.\nDor Não Anginosa: Atende a apenas um ou nenhum dos critérios, sugerindo que a causa pode ser muscular ou gástrica (não cardíaca).\nAssintomático: O paciente não sente dor, mas o médico ainda assim solicitou os exames devido a outros fatores de risco (como idade ou histórico familiar).\n\nthalach : Frequência cardíaca máxima atingida antes da exaustão ou sintomas (no teste de esforço).\nexang : Indica se o paciente sentiu angina (dor) durante o exercício.\noldpeak : diferença entre a posição do segmento ST (ECG) no repouso e no pico do esforço (thalac) (quanto maior essa diferença, maior é a área do coração que sofre por falta de sangue)\nslope : Enquanto o oldpeak diz o quanto a linha afundou, o slope diz como ela se comporta logo após o afundamento. Existem três tipos principais de inclinação:\n\nValue 0: Upsloping (Ascendente): A linha afunda, mas sobe rápido. É comum em exercícios intensos e nem sempre indica doença grave.\nValue 1: Flat (Plano): A linha afunda e fica “reta”. É um sinal clássico e preocupante de isquemia.\nValue 2: Downsloping (Descendente): A linha afunda e continua descendo. É o sinal mais grave de todos, indicando que o coração está em alto sofrimento isquêmico. (mesmo após a interrupção do esforço)\n\nca : Número de vasos principais com depósitos de cálcio ou interrupções no fluxo.\n\n0: Nenhuma calcificação significativa (indício de artérias limpas)\n1, 2 o u 3: Indica que a doença está presente em um, dois ou três vasos principais.\n\nthal : Avalia se o sangue está chegando a todas as partes do coração durante o repouso e após o esforço.\n\n0 = Normal: O contraste se distribui uniformemente por todo o coração.\n1 = Fixed Defect (Defeito Fixo): Uma parte do coração não recebe o contraste nem no esforço, nem no repouso. Isso geralmente indica tecido morto (cicatriz de um infarto antigo).\n2 = Reversable Defect (Defeito Reversível): O coração parece normal em repouso, mas “falta sangue” em alguma região durante o esforço. Isso é o sinal clássico de isquemia ativa: a artéria está entupida, mas o tecido ainda está vivo e sofrendo.\n\ncondition (target)\ntrestbps : É a pressão arterial medida no momento da internação.\nfbs : Glicemia de Jejum é maior ou menor que 120mg/dl (binário)\nchol : nível total de colesterol no sangue.\nrestecg :\n\nValue 0 (Normal): O coração em repouso não apresenta irregularidades elétricas.\nValue 1 (Anormalidade de Onda ST-T): O coração já mostra sinais de sofrimento mesmo sem fazer esforço. É um sinal de alerta precoce.\nValue 2 (Hipertrofia Ventricular Esquerda): Indica que o músculo do coração está “inchado” (grosso), geralmente por ter que fazer muita força para bombear o sangue contra uma pressão alta crônica."
  },
  {
    "objectID": "results/relatorio.html#modelo-com-todas-as-variáveis",
    "href": "results/relatorio.html#modelo-com-todas-as-variáveis",
    "title": "Análise Estatística de Fatores de Risco para Doença Coronária",
    "section": "Modelo com todas as variáveis",
    "text": "Modelo com todas as variáveis\n\nformula1 &lt;- condition ~ age + sex + cp + thalach + exang +\n                         oldpeak + slope + ca + thal +\n                         trestbps + chol + fbs + restecg\n\nmodelo1_ &lt;- glm(formula1, data = treino, family = \"binomial\")\n\n\nsummary(modelo1_)\n\n\nCall:\nglm(formula = formula1, family = \"binomial\", data = treino)\n\nCoefficients:\n             Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept) -6.194972   3.665480  -1.690 0.091012 .  \nage         -0.026817   0.029325  -0.914 0.360473    \nsex1         1.751307   0.623152   2.810 0.004948 ** \ncp1          1.905287   0.923121   2.064 0.039021 *  \ncp2          0.321896   0.847290   0.380 0.704011    \ncp3          2.768984   0.864891   3.202 0.001367 ** \nthalach     -0.011517   0.012639  -0.911 0.362196    \nexang1       0.337282   0.550815   0.612 0.540317    \noldpeak      0.649698   0.283217   2.294 0.021791 *  \nslope1       1.341601   0.600799   2.233 0.025547 *  \nslope2       0.402313   1.023407   0.393 0.694237    \nca1          2.575920   0.637209   4.043 5.29e-05 ***\nca2          3.119482   0.851992   3.661 0.000251 ***\nca3          2.982628   1.206518   2.472 0.013432 *  \nthal1       -0.336710   0.979476  -0.344 0.731023    \nthal2        1.486334   0.518928   2.864 0.004180 ** \ntrestbps     0.014047   0.014133   0.994 0.320261    \nchol         0.005760   0.005651   1.019 0.308039    \nfbs1        -0.407723   0.701053  -0.582 0.560845    \nrestecg1     1.120803   3.359086   0.334 0.738634    \nrestecg2     0.261999   0.460966   0.568 0.569784    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 328.58  on 237  degrees of freedom\nResidual deviance: 141.26  on 217  degrees of freedom\nAIC: 183.26\n\nNumber of Fisher Scoring iterations: 6\n\n\nO teste de significância do modelo mostra que ele possui uma deviance muito menor, em relação ao modelo sem variáveis;\nO AIC foi de 183.26.\nEmbora o modelo explique consiga explicar bem a variável alvo, é possível observar que a maioria das covariáveis não são estatísticametentes significativas, segundo o teste de Wald.\nPara verificar isso, faremos um Teste de Razão de Verossimilhanças, verificando o impacto da retirada de cada variável.\n\npander(Anova(modelo1_, type = \"III\", test = \"LR\"))\n\n\nAnalysis of Deviance Table (Type III tests)\n\n\n\n\n\n\n\n\n \nLR Chisq\nDf\nPr(&gt;Chisq)\n\n\n\n\nage\n0.8384\n1\n0.3599\n\n\nsex\n8.776\n1\n0.003053\n\n\ncp\n20.58\n3\n0.0001287\n\n\nthalach\n0.8493\n1\n0.3568\n\n\nexang\n0.3705\n1\n0.5427\n\n\noldpeak\n5.789\n1\n0.01612\n\n\nslope\n5.689\n2\n0.05818\n\n\nca\n30.8\n3\n9.375e-07\n\n\nthal\n10.29\n2\n0.005832\n\n\ntrestbps\n0.9972\n1\n0.318\n\n\nchol\n1.046\n1\n0.3065\n\n\nfbs\n0.3411\n1\n0.5592\n\n\nrestecg\n0.4147\n2\n0.8127\n\n\n\n\n\nAqui é possível obervar que as variáveis que mais contribuem para o modelo são: sex, cp, oldpeak, slope, ca e thal\nPara verificar se as outras variáveis não são importantes, faremos o Teste de Razão de Verossimilhanças entre o modelo com todas as variáveis e o modelo sem as variáveis (age, thalach, exang, trestbps, chol, fbs, restecg)\n\n# Modelo reduzido ( com 6 variáveis )\nmodelo_reduzido_ &lt;- glm(condition ~  sex + cp +\n                        oldpeak + slope + ca + thal,\n                    data = treino, \n                    family = \"binomial\")\n\npander(anova(modelo1_, modelo_reduzido_, test = \"Chisq\"))\n\n\nAnalysis of Deviance Table\n\n\n\n\n\n\n\n\n\nResid. Df\nResid. Dev\nDf\nDeviance\nPr(&gt;Chi)\n\n\n\n\n217\n141.3\nNA\nNA\nNA\n\n\n225\n146\n-8\n-4.728\n0.7863\n\n\n\n\n\nO P-valor foi de 0.7863, ou seja, não há evidências de que o modelo com todas as variáveis seja melhor que o modelo reduzido. Então optamos pelo uso do modelo reduzido.\n\npander(Anova(modelo_reduzido_, type = \"III\", test = \"LR\"))\n\n\nAnalysis of Deviance Table (Type III tests)\n\n\n\n\n\n\n\n\n \nLR Chisq\nDf\nPr(&gt;Chisq)\n\n\n\n\nsex\n7.552\n1\n0.005995\n\n\ncp\n33.87\n3\n2.114e-07\n\n\noldpeak\n8.84\n1\n0.002947\n\n\nslope\n7.529\n2\n0.02318\n\n\nca\n36.4\n3\n6.159e-08\n\n\nthal\n13.53\n2\n0.001152\n\n\n\n\n\nTodas variáveis contribuem significativamente par ao modelo."
  },
  {
    "objectID": "results/relatorio.html#analisando-os-coeficientes-do-modelo-reduzido",
    "href": "results/relatorio.html#analisando-os-coeficientes-do-modelo-reduzido",
    "title": "Análise Estatística de Fatores de Risco para Doença Coronária",
    "section": "Analisando os coeficientes do modelo reduzido",
    "text": "Analisando os coeficientes do modelo reduzido\n\nsummary(modelo_reduzido_)\n\n\nCall:\nglm(formula = condition ~ sex + cp + oldpeak + slope + ca + thal, \n    family = \"binomial\", data = treino)\n\nCoefficients:\n            Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept)  -5.9413     1.0866  -5.468 4.55e-08 ***\nsex1          1.5013     0.5701   2.633 0.008457 ** \ncp1           1.9084     0.8790   2.171 0.029920 *  \ncp2           0.1321     0.8094   0.163 0.870380    \ncp3           2.8874     0.7625   3.787 0.000153 ***\noldpeak       0.7464     0.2675   2.790 0.005265 ** \nslope1        1.4200     0.5586   2.542 0.011027 *  \nslope2        0.3778     0.9772   0.387 0.699022    \nca1           2.4781     0.5834   4.248 2.16e-05 ***\nca2           2.7872     0.7884   3.535 0.000407 ***\nca3           3.0723     1.1399   2.695 0.007031 ** \nthal1        -0.4301     0.9152  -0.470 0.638360    \nthal2         1.6062     0.4905   3.275 0.001058 ** \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 328.58  on 237  degrees of freedom\nResidual deviance: 145.99  on 225  degrees of freedom\nAIC: 171.99\n\nNumber of Fisher Scoring iterations: 6\n\n\nO AIC do modelo reduzido (171.99) foi menor, em relação ao modelo com todas as variáveis, e a Deviance Residual foi aproximadamente igual. Ou seja, o modelo com menos variáveis conseguiu explicar tão bem os dados quanto o completo.\n\n# Calcula os Odds Ratios e os Intervalos de Confiança\nintervalos &lt;- exp(confint(modelo_reduzido_))\n\nWaiting for profiling to be done...\n\nors &lt;- exp(coef(modelo_reduzido_))\n\n# Cria o data frame e calcula a Amplitude\ntabela_coef &lt;- data.frame(\n  OR = ors,\n  \"2.5\" = intervalos[,1],\n  \"97.5\" = intervalos[,2],\n  Amplitude = intervalos[,2] - intervalos[,1] # Diferença absoluta\n)\n\npander(tabela_coef, \n       caption = \"Odds Ratios, Intervalos de Confiança e Amplitude\",\n       digits = 4)\n\n\nOdds Ratios, Intervalos de Confiança e Amplitude\n\n\n\n\n\n\n\n\n\n \nOR\nX2.5\nX97.5\nAmplitude\n\n\n\n\n(Intercept)\n0.002629\n0.0002555\n0.01868\n0.01842\n\n\nsex1\n4.487\n1.524\n14.54\n13.02\n\n\ncp1\n6.742\n1.257\n40.86\n39.6\n\n\ncp2\n1.141\n0.2326\n5.755\n5.522\n\n\ncp3\n17.95\n4.36\n89.08\n84.72\n\n\noldpeak\n2.109\n1.278\n3.68\n2.401\n\n\nslope1\n4.137\n1.427\n12.99\n11.56\n\n\nslope2\n1.459\n0.2034\n9.701\n9.497\n\n\nca1\n11.92\n3.986\n39.93\n35.94\n\n\nca2\n16.24\n3.77\n83.96\n80.19\n\n\nca3\n21.59\n2.872\n261.3\n258.5\n\n\nthal1\n0.6504\n0.1084\n4.116\n4.008\n\n\nthal2\n4.984\n1.94\n13.45\n11.51\n\n\n\n\n\nÉ possível observar que alguns coeficientes estimados são muito incertos (o modelo não conseguiu definir se a associação entre a respectiva variável e o target era positiva ou negativa);\nEssas variáveis foram : cp2, slope2 e thal1\nOutros coeficientes tinham IC com amplitude grande demais, como foi o caso de cp3, ca3, ca2\nOu seja, o modelo não conseguiu estimar precisamente os coeficientes\nUma possível motivação para isso é que essas variáveis categóricas possuem algumas classes subrepresentadas no dataset, dificultando a estimação dos parâmetros."
  },
  {
    "objectID": "results/relatorio.html#treinando-modelo-com-agrupamento-de-classes-subrepresentadas",
    "href": "results/relatorio.html#treinando-modelo-com-agrupamento-de-classes-subrepresentadas",
    "title": "Análise Estatística de Fatores de Risco para Doença Coronária",
    "section": "Treinando modelo com agrupamento de classes subrepresentadas",
    "text": "Treinando modelo com agrupamento de classes subrepresentadas\n\ncp :\n\ncat0 : {0, 1, 2}\ncat1 : 3\n\nslope :\n\ncat0 : 0\ncat1 : {1, 2}\n\nca :\n\ncat0 : 0\ncat1 : {1, 2, 3}\n\nthal :\n\ncat0 : 0\ncat1 : {1, 2}\n\n\n\nmodelo_limpo &lt;- glm(condition ~ sex+ cp +\n                   oldpeak + slope + ca + thal, \n                 data = treino_limpo, \n                 family = \"binomial\")\n\n\nsummary(modelo_limpo)\n\n\nCall:\nglm(formula = condition ~ sex + cp + oldpeak + slope + ca + thal, \n    family = \"binomial\", data = treino_limpo)\n\nCoefficients:\n                Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept)      -2.1741     0.5627  -3.864 0.000112 ***\nsex1              1.1387     0.4984   2.285 0.022342 *  \ncp_sem dor        2.1247     0.4299   4.943 7.70e-07 ***\noldpeak           0.5708     0.2290   2.493 0.012669 *  \nslope_not_asc     0.9416     0.4819   1.954 0.050691 .  \nca_zero          -2.3326     0.4465  -5.224 1.75e-07 ***\nthal_not_normal   1.2461     0.4543   2.743 0.006092 ** \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 328.58  on 237  degrees of freedom\nResidual deviance: 157.70  on 231  degrees of freedom\nAIC: 171.7\n\nNumber of Fisher Scoring iterations: 6\n\n\n\npander(Anova(modelo_limpo, type = \"III\", test = \"LR\"))\n\n\nAnalysis of Deviance Table (Type III tests)\n\n\n\n\n\n\n\n\n \nLR Chisq\nDf\nPr(&gt;Chisq)\n\n\n\n\nsex\n5.427\n1\n0.01983\n\n\ncp\n27.94\n1\n1.251e-07\n\n\noldpeak\n6.894\n1\n0.008648\n\n\nslope\n3.875\n1\n0.04902\n\n\nca\n32.82\n1\n1.011e-08\n\n\nthal\n7.67\n1\n0.005615\n\n\n\n\n\n\n# Calcula os Odds Ratios e os Intervalos de Confiança\nintervalos &lt;- exp(confint(modelo_limpo))\n\nWaiting for profiling to be done...\n\nors &lt;- exp(coef(modelo_limpo))\n\n# Cria o data frame e calcula a Amplitude\ntabela_coef &lt;- data.frame(\n  OR = ors,\n  \"2.5\" = intervalos[,1],\n  \"97.5\" = intervalos[,2],\n  Amplitude = intervalos[,2] - intervalos[,1] # Diferença absoluta\n)\n\npander(tabela_coef, \n       caption = \"Odds Ratios, Intervalos de Confiança e Amplitude\",\n       digits = 4)\n\n\nOdds Ratios, Intervalos de Confiança e Amplitude\n\n\n\n\n\n\n\n\n\n \nOR\nX2.5\nX97.5\nAmplitude\n\n\n\n\n(Intercept)\n0.1137\n0.0346\n0.3199\n0.2853\n\n\nsex1\n3.123\n1.196\n8.564\n7.368\n\n\ncp_sem dor\n8.37\n3.71\n20.25\n16.54\n\n\noldpeak\n1.77\n1.15\n2.836\n1.686\n\n\nslope_not_asc\n2.564\n1.004\n6.721\n5.717\n\n\nca_zero\n0.09704\n0.03845\n0.2243\n0.1859\n\n\nthal_not_normal\n3.477\n1.439\n8.636\n7.198\n\n\n\n\n\nAqui, é possível observar que os parâmetros estão mais estáveis e os odds ratios estão mais de acordo com os resultados obtidos da EDA;"
  },
  {
    "objectID": "results/relatorio.html#verificando-o-desempenho-dos-modelos-no-conjunto-de-teste",
    "href": "results/relatorio.html#verificando-o-desempenho-dos-modelos-no-conjunto-de-teste",
    "title": "Análise Estatística de Fatores de Risco para Doença Coronária",
    "section": "Verificando o desempenho dos modelos no conjunto de teste",
    "text": "Verificando o desempenho dos modelos no conjunto de teste\n\nset.seed(28)\nmodelo1 &lt;- train( condition ~ sex+ cp +\n                    oldpeak + slope + ca + thal,\n                  data = treino,\n                  method = \"glm\",\n                  family = \"binomial\",\n                  trControl = ctrl)\n\nmodelo2 &lt;- train( condition ~ sex+ cp +\n                    oldpeak + slope + ca + thal,\n                  data = treino_limpo,\n                  method = \"glm\",\n                  family = \"binomial\",\n                  trControl = ctrl)\n\nresultados &lt;- resamples(list(original = modelo1, limpo = modelo2))\n\n\ndotplot(resultados)\n\n\n\n\n\n\n\n\n\n# Matriz para o modelo original\np1 &lt;- predict(modelo1, treino)\nm_original &lt;- confusionMatrix(p1, treino$condition)\n\n# Matriz para o modelo limpo\np2 &lt;- predict(modelo2, treino_limpo)\nm_limpo &lt;- confusionMatrix(p2, treino_limpo$condition)\n\n# Exibindo lado a lado com pander\npander(m_original$table, caption = \"Matriz de Confusão: Modelo Original\")\n\n\nMatriz de Confusão: Modelo Original\n\n\n\n\n\n\n\n \nSaudavel\nDoente\n\n\n\n\nSaudavel\n116\n15\n\n\nDoente\n12\n95\n\n\n\n\npander(m_limpo$table, caption = \"Matriz de Confusão: Modelo Limpo\")\n\n\nMatriz de Confusão: Modelo Limpo\n\n\n\n\n\n\n\n \nSaudavel\nDoente\n\n\n\n\nSaudavel\n112\n18\n\n\nDoente\n16\n92\n\n\n\n\n\n\n# 1. Treinando a Árvore de Decisão com Dados Originais\narvore_original &lt;- rpart(condition ~ sex + cp + oldpeak + slope + ca + thal, \n                         data = treino, \n                         method = \"class\")\n\n# 2. Treinando a Árvore de Decisão com Dados Limpos\narvore_limpa &lt;- rpart(condition ~ sex + cp + oldpeak + slope + ca + thal, \n                      data = treino_limpo, \n                      method = \"class\")\n\n# 3. Plotando as árvores lado a lado para comparação\npar(mfrow = c(1, 2)) # Divide a tela em 2 colunas\n\nrpart.plot(arvore_original, main = \"Árvore: Dados Originais\", \n           type = 4, extra = 104, under = TRUE, faclen = 0)\n\nrpart.plot(arvore_limpa, main = \"Árvore: Dados Limpos\", \n           type = 4, extra = 104, under = TRUE, faclen = 0)\n\n\n\n\n\n\n\n\n\n# --- 1. PREDIÇÕES (REGRESSÃO LOGÍSTICA) ---\n# Modelo 1 (Original) no Teste Original\npred_log_orig &lt;- predict(modelo1, teste)\ncm_log_orig &lt;- confusionMatrix(pred_log_orig, teste$condition)\n\n# Modelo 2 (Limpo) no Teste Limpo\npred_log_limpo &lt;- predict(modelo2, teste_limpo)\ncm_log_limpo &lt;- confusionMatrix(pred_log_limpo, teste_limpo$condition)\n\n# --- 2. PREDIÇÕES (ÁRVORE DE DECISÃO) ---\n# Árvore Original no Teste Original\npred_tree_orig &lt;- predict(arvore_original, teste, type = \"class\")\ncm_tree_orig &lt;- confusionMatrix(pred_tree_orig, teste$condition)\n\n# Árvore Limpa no Teste Limpo\npred_tree_limpa &lt;- predict(arvore_limpa, teste_limpo, type = \"class\")\ncm_tree_limpa &lt;- confusionMatrix(pred_tree_limpa, teste_limpo$condition)\n\n# --- 3. TABELA COMPARATIVA DE ACURÁCIA ---\ncomparativo_teste &lt;- data.frame(\n  Modelo = c(\"Logística Original\", \"Logística Limpa\", \"Árvore Original\", \"Árvore Limpa\"),\n  Acuracia = c(cm_log_orig$overall['Accuracy'], cm_log_limpo$overall['Accuracy'], \n               cm_tree_orig$overall['Accuracy'], cm_tree_limpa$overall['Accuracy']),\n  Sensibilidade = c(cm_log_orig$byClass['Sensitivity'], cm_log_limpo$byClass['Sensitivity'], \n                    cm_tree_orig$byClass['Sensitivity'], cm_tree_limpa$byClass['Sensitivity']),\n  Especificidade = c(cm_log_orig$byClass['Specificity'], cm_log_limpo$byClass['Specificity'], \n                     cm_tree_orig$byClass['Specificity'], cm_tree_limpa$byClass['Specificity'])\n)\n\npander(comparativo_teste, caption = \"Performance no Conjunto de Teste\")\n\n\nPerformance no Conjunto de Teste\n\n\n\n\n\n\n\n\nModelo\nAcuracia\nSensibilidade\nEspecificidade\n\n\n\n\nLogística Original\n0.8136\n0.8438\n0.7778\n\n\nLogística Limpa\n0.7966\n0.8125\n0.7778\n\n\nÁrvore Original\n0.8305\n0.875\n0.7778\n\n\nÁrvore Limpa\n0.8305\n0.875\n0.7778\n\n\n\n\n# --- 1. PREDIÇÕES DE PROBABILIDADE (Necessárias para AUC) ---\nprob_log_orig  &lt;- predict(modelo1, teste, type = \"prob\")[,2]\nprob_log_limpo &lt;- predict(modelo2, teste_limpo, type = \"prob\")[,2]\nprob_tree_orig &lt;- predict(arvore_original, teste, type = \"prob\")[,2]\nprob_tree_limpa &lt;- predict(arvore_limpa, teste_limpo, type = \"prob\")[,2]\n\n# --- 2. FUNÇÃO AUXILIAR PARA MÉTRICAS ---\nget_metrics &lt;- function(pred_class, true_class, probs) {\n  cm &lt;- confusionMatrix(pred_class, true_class)\n  roc_obj &lt;- roc(true_class, probs, quiet = TRUE)\n  \n  return(c(\n    Acc = cm$overall['Accuracy'],\n    Sens = cm$byClass['Sensitivity'],\n    Spec = cm$byClass['Specificity'],\n    AUC = auc(roc_obj),\n    PR_AUC = PRAUC(probs, ifelse(true_class == levels(true_class)[2], 1, 0))\n  ))\n}\n\n# --- 3. CÁLCULO DAS MÉTRICAS ---\nm1 &lt;- get_metrics(pred_log_orig, teste$condition, prob_log_orig)\nm2 &lt;- get_metrics(pred_log_limpo, teste_limpo$condition, prob_log_limpo)\nm3 &lt;- get_metrics(pred_tree_orig, teste$condition, prob_tree_orig)\nm4 &lt;- get_metrics(pred_tree_limpa, teste_limpo$condition, prob_tree_limpa)\n\n# --- 4. TABELA FINAL ---\ncomparativo_completo &lt;- data.frame(\n  Modelo = c(\"Logística Original\", \"Logística Limpa\", \"Árvore Original\", \"Árvore Limpa\"),\n  rbind(m1, m2, m3, m4)\n)\npander(comparativo_completo, caption = \"Comparativo de Performance no Teste (AUC e PR-AUC)\")\n\n\nComparativo de Performance no Teste (AUC e PR-AUC) (continued below)\n\n\n\n\n\n\n\n\n \nModelo\nAcc.Accuracy\nSens.Sensitivity\n\n\n\n\nm1\nLogística Original\n0.8136\n0.8438\n\n\nm2\nLogística Limpa\n0.7966\n0.8125\n\n\nm3\nÁrvore Original\n0.8305\n0.875\n\n\nm4\nÁrvore Limpa\n0.8305\n0.875\n\n\n\n\n\n\n\n\n\n\n\n\n \nSpec.Specificity\nAUC\nPR_AUC\n\n\n\n\nm1\n0.7778\n0.8704\n0.8558\n\n\nm2\n0.7778\n0.8819\n0.8641\n\n\nm3\n0.7778\n0.8281\n0.352\n\n\nm4\n0.7778\n0.8281\n0.352\n\n\n\n\n# --- 5. PRINT DAS MATRIZES DE CONFUSÃO ---\ncat(\"\\n### MATRIZES DE CONFUSÃO ###\\n\")\n\n\n### MATRIZES DE CONFUSÃO ###\n\npander(cm_log_orig$table, caption = \"Logística Original\")\n\n\nLogística Original\n\n\n\n\n\n\n\n \nSaudavel\nDoente\n\n\n\n\nSaudavel\n27\n6\n\n\nDoente\n5\n21\n\n\n\n\npander(cm_log_limpo$table, caption = \"Logística Limpa\")\n\n\nLogística Limpa\n\n\n\n\n\n\n\n \nSaudavel\nDoente\n\n\n\n\nSaudavel\n26\n6\n\n\nDoente\n6\n21\n\n\n\n\npander(cm_tree_orig$table, caption = \"Árvore Original\")\n\n\nÁrvore Original\n\n\n\n\n\n\n\n \nSaudavel\nDoente\n\n\n\n\nSaudavel\n28\n6\n\n\nDoente\n4\n21\n\n\n\n\npander(cm_tree_limpa$table, caption = \"Árvore Limpa\")\n\n\nÁrvore Limpa\n\n\n\n\n\n\n\n \nSaudavel\nDoente\n\n\n\n\nSaudavel\n28\n6\n\n\nDoente\n4\n21"
  }
]